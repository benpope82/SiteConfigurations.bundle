<?xml version="1.0" encoding="UTF-8"?>
<site site="http://www.fox.com/.+"
	plugin="swf/flvPlayer.swf"
	agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:18.0) Gecko/20100101 Firefox/18.0"
	initialState="init"
	version="9.0">

	<crop x="0" y="0" width="0" height="0" />

	<!-- init -->
	<state name="init">
		<event>
			<condition>
				<and>
					<frameLoaded />
					<javascript script="document.evaluate('//object[contains(@data, &quot;AccessEnabler.swf&quot;)]', document.documentElement, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue !== null ? 1 : 0" matches="1" />
				</and>
			</condition>
			<action>
				<run script="var interval=window.setInterval(function(){if(document.evaluate('//object[contains(@data,&quot;flvPlayer.swf&quot;)]',document.documentElement,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue==null){location.reload(true);}else{window.clearInterval(interval);}},10000);" />
				<run script="var divs=document.getElementsByClassName('advertisement');for(var i=0;i&lt;divs.length;i++){divs[i].innerHTML=''}" />
				<run script="var iframes=document.getElementsByTagName('iframe');for(var i=0;i&lt;iframes.length;i++){iframes[i].src=''}" />
				<goto state="waiting" />
			</action>
		</event>
	</state>

	<!-- waiting -->
	<state name="waiting">
		<event>
			<condition>
				<and>
					<javascript script="document.evaluate('//object[contains(@data, &quot;flvPlayer.swf&quot;)]', document.documentElement, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue !== null ? 1 : 0" matches="1" />
				</and>
			</condition>
			<action>
				<run script="var divs=document.getElementsByClassName('advertisement');for(var i=0;i&lt;divs.length;i++){divs[i].innerHTML=''}" />
				<run script="var iframes=document.getElementsByTagName('iframe');for(var i=0;i&lt;iframes.length;i++){iframes[i].src=''}" />
				<goto state="playing" />
			</action>
		</event>
	</state>

	<!-- playing -->
	<state name="playing">
		<event>
			<condition>
				<command name="pause" />
			</condition>
			<action>
				<run script="FoxPlayer.pause()" />
				<goto state="paused" />
			</action>
		</event>
	</state>

	<!-- paused -->
	<state name="paused">
		<event>
			<condition>
				<command name="play" />
			</condition>
			<action>
				<run script="FoxPlayer.resume()" />
				<goto state="playing" />
			</action>
		</event>
	</state>
</site>
